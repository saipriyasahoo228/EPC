import{r as o,j as e}from"./main-DTv03d8r.js";import{C as J}from"./Close-BAEP8ymL.js";import{T as y,H as b,v as T,w,x,y as r,z as M,I as h,D as G,r as Q,t as Y,q as E}from"./TableRow-DyRCyY9b.js";import{G as n}from"./Grid-C5mdLuvI.js";import{B as F}from"./Box-CyTnG5kx.js";import{A as $}from"./AddCircle-Br8tjFgv.js";import{T as q}from"./TableContainer-DOhr4ZW5.js";import{E as z,D as U}from"./Edit-DGVU-IuU.js";import{D as W}from"./DialogActions-CMm5oWDU.js";import"./Transition-ChWAEdMD.js";const K=[{id:"PRJ-2025-001"},{id:"PRJ-2025-002"},{id:"PRJ-2025-003"}],oe=()=>{const[D,A]=o.useState(""),[S,P]=o.useState(""),[N,j]=o.useState(!1),[v,I]=o.useState(""),[i,a]=o.useState({}),[l,u]=o.useState([]),[m,p]=o.useState(!1),[k,f]=o.useState(null),R=t=>{I(t);const s=new Date().getFullYear(),g=(l.length+1).toString().padStart(3,"0");a({safetymanagementID:`SAF-${s}-${g}`,projectId:t}),p(!1),f(null),j(!0)},B=t=>{a(t),I(t.projectId),p(!0),f(t.safetymanagementID),j(!0)},L=t=>{window.confirm("Are you sure you want to delete safety management!")&&u(l.filter(s=>s.safetymanagementID!==t))},d=()=>{j(!1),a({}),p(!1),f(null)},c=t=>{const{name:s,value:C}=t.target;a(g=>({...g,[s]:C}))},O=()=>{if(m)u(l.map(t=>t.safetymanagementID===k?i:t));else{const t={...i,projectId:v};u([...l,t])}d()},H=l.filter(t=>Object.values(t).some(s=>s&&s.toString().toLowerCase().includes(S.toLowerCase())));return e.jsxs(e.Fragment,{children:[e.jsx(y,{variant:"h5",gutterBottom:!0,sx:{mt:5},children:"Quality Control & Assurance"}),e.jsx(n,{container:!0,spacing:2,direction:"column",sx:{mb:2},children:e.jsx(n,{item:!0,xs:12,children:e.jsxs(b,{sx:{p:2,backgroundColor:"#fff",border:"1px solid #ccc"},children:[e.jsx(y,{variant:"h6",gutterBottom:!0,children:"PROJECT RECORDS"}),e.jsx(F,{sx:{my:2,mx:1},children:e.jsx("input",{type:"text",placeholder:"Search Project ID",value:D,onChange:t=>A(t.target.value),className:"input",style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:4}})}),e.jsxs(T,{children:[e.jsx(w,{children:e.jsxs(x,{children:[e.jsx(r,{sx:{color:"#7267ef"},children:e.jsx("strong",{children:"Project ID"})}),e.jsx(r,{sx:{display:"flex",justifyContent:"flex-end",color:"#660000"},children:e.jsx("strong",{children:"Action"})})]})}),e.jsx(M,{children:K.filter(t=>t.id.toLowerCase().includes(D.toLowerCase())).map((t,s)=>e.jsxs(x,{children:[e.jsx(r,{children:t.id}),e.jsx(r,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(h,{onClick:()=>R(t.id),color:"primary",children:e.jsx($,{sx:{color:"#7267ef"}})})})]},s))})]})]})})}),e.jsx(n,{container:!0,spacing:2,children:e.jsx(n,{item:!0,xs:12,children:e.jsxs(b,{sx:{p:2,backgroundColor:"#fff",border:"1px solid #ccc"},children:[e.jsx(y,{variant:"h6",gutterBottom:!0,children:"SAFETY MANAGEMENT DETAILS"}),e.jsx("input",{type:"text",placeholder:"Search Safety Management",value:S,onChange:t=>P(t.target.value),className:"input",style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:4,marginBottom:"16px"}}),e.jsx(q,{sx:{maxHeight:400,overflow:"auto",border:"1px solid #ddd"},children:e.jsxs(T,{stickyHeader:!0,children:[e.jsx(w,{children:e.jsxs(x,{children:[e.jsx(r,{sx:{color:"#7267ef"},children:e.jsx("strong",{children:"Project ID"})}),e.jsx(r,{sx:{color:"#7267ef"},children:e.jsx("strong",{children:"Safety Report ID"})}),e.jsx(r,{sx:{color:"#7267ef"},children:e.jsx("strong",{children:"Incident Date"})}),e.jsx(r,{sx:{color:"#7267ef"},children:e.jsx("strong",{children:"Incident Description"})}),e.jsx(r,{sx:{color:"#7267ef"},children:e.jsx("strong",{children:"Affected Personnel ID"})}),e.jsx(r,{sx:{color:"#7267ef"},children:e.jsx("strong",{children:"Injury Severity"})}),e.jsx(r,{sx:{color:"#7267ef"},children:e.jsx("strong",{children:"Corrective Measures"})}),e.jsx(r,{sx:{color:"#7267ef"},children:e.jsx("strong",{children:"Safety Training Conducted"})}),e.jsx(r,{sx:{color:"#660000"},children:e.jsx("strong",{children:"Actions"})})]})}),e.jsx(M,{children:H.map((t,s)=>e.jsxs(x,{children:[e.jsx(r,{children:t.projectId}),e.jsx(r,{children:t.safetymanagementID}),e.jsx(r,{children:t.incidentDate}),e.jsx(r,{children:t.incidentDescription}),e.jsx(r,{children:t.affectedpersonnelID}),e.jsx(r,{children:t.injurySeverity}),e.jsx(r,{children:t.correctiveMeasures}),e.jsx(r,{children:t.injurySeverity}),e.jsx(r,{children:t.safetyTraining}),e.jsxs(r,{children:[e.jsx(h,{onClick:()=>B(t),color:"warning",children:e.jsx(z,{sx:{color:"orange"}})}),e.jsx(h,{onClick:()=>L(t.safetymanagementID),color:"error",children:e.jsx(U,{sx:{color:"red"}})})]})]},s))})]})})]})})}),e.jsxs(G,{open:N,onClose:d,fullWidth:!0,children:[e.jsx(Q,{children:m?"Edit Safety Management Details":"Enter Safety Management Details"}),e.jsxs(Y,{sx:{position:"relative"},children:[e.jsx(h,{"aria-label":"close",onClick:d,sx:{position:"absolute",right:8,top:8,color:t=>t.palette.grey[500]},children:e.jsx(J,{})}),e.jsx(F,{component:"form",sx:{mt:2},children:e.jsxs(n,{container:!0,spacing:3,direction:"column",children:[e.jsxs(n,{item:!0,xs:12,children:[e.jsx("h3",{style:{color:"#7267ef"},children:"Project Information"}),e.jsx("hr",{style:{borderTop:"2px solid #7267ef",width:"80%"}}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsxs(n,{item:!0,xs:6,children:[e.jsx("label",{htmlFor:"projectId",children:"Project ID"}),e.jsx("input",{id:"projectId",className:"input",value:v,disabled:!0})]}),e.jsxs(n,{item:!0,xs:6,children:[e.jsx("label",{htmlFor:"safetymanagementID",children:"Safety Report ID"}),e.jsx("input",{id:"safetymanagementID",className:"input",value:i.safetymanagementID||"",disabled:!0})]})]})]}),e.jsxs(n,{item:!0,xs:12,children:[e.jsx("h3",{style:{color:"#7267ef"},children:"Incident Information"}),e.jsx("hr",{style:{borderTop:"2px solid #7267ef",width:"80%"}}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsxs(n,{item:!0,xs:6,children:[e.jsx("label",{htmlFor:"incidentDate",children:"Incident Date"}),e.jsx("input",{type:"date",id:"incidentDate",name:"incidentDate",className:"input",value:i.incidentDate||"",onChange:c})]}),e.jsxs(n,{item:!0,xs:6,children:[e.jsx("label",{htmlFor:"incidentDescription",children:"Incident Description"}),e.jsx("textarea",{rows:3,id:"incidentDescription",name:"incidentDescription",className:"input",value:i.incidentDescription||"",onChange:c})]}),e.jsxs(n,{item:!0,xs:6,children:[e.jsx("label",{htmlFor:"affectedpersonnelID",children:"Affected Personnel ID"}),e.jsx("input",{id:"affectedpersonnelID",name:"affectedpersonnelID",className:"input",value:i.affectedpersonnelID||"",onChange:c})]}),e.jsxs(n,{item:!0,xs:6,children:[e.jsx("label",{htmlFor:"injurySeverity",children:"Approval Status"}),e.jsxs("select",{id:"injurySeverity",name:"injurySeverity",className:"input",value:i.injurySeverity||"",onChange:c,children:[e.jsx("option",{value:"",children:"Select Severity"}),e.jsx("option",{value:"Minor",children:"Minor"}),e.jsx("option",{value:"Moderate",children:"Moderate"}),e.jsx("option",{value:"Severe",children:"Severe"}),e.jsx("option",{value:"Fatal",children:"Fatal"})]})]})]}),e.jsxs(n,{item:!0,xs:6,children:[e.jsx("label",{htmlFor:"correctiveMeasures",children:"Corrective Measures"}),e.jsx("input",{id:"correctiveMeasures",name:"correctiveMeasures",className:"input",value:i.correctiveMeasures||"",onChange:c})]}),e.jsxs(n,{item:!0,xs:6,children:[e.jsx("label",{htmlFor:"safetyTraining",children:"Safety Training Conducted"}),e.jsx("input",{type:"checkbox",id:"safetyTraining",name:"safetyTraining",checked:i.safetyTraining||!1,onChange:t=>a({...i,safetyTraining:t.target.checked})})]})]})]})})]}),e.jsxs(W,{children:[e.jsx(E,{onClick:d,sx:{outline:"2px solid #800000",color:"#800000","&:hover":{outline:"2px solid #b30000",color:"#b30000"}},children:"Cancel"}),e.jsx(E,{variant:"outlined",onClick:O,sx:{borderColor:"#7267ef",color:"#7267ef","&:hover":{borderColor:"#9e8df2",color:"#9e8df2"}},children:m?"Update":"Submit"})]})]})]})};export{oe as default};
