import{r as l,j as e}from"./main-DTv03d8r.js";import{E as k}from"./jspdf.plugin.autotable-BtY0fsPl.js";import{C as A}from"./Close-BAEP8ymL.js";import{q as u,D as N,r as O,I as C,t as G,H as z,T as H,v as L,w as Q,x as I,y as s,z as W}from"./TableRow-DyRCyY9b.js";import{G as o}from"./Grid-C5mdLuvI.js";import{a as $,T as q}from"./TablePagination-C-yj9544.js";import{D as Y}from"./DialogActions-CMm5oWDU.js";import{E as _,D as J}from"./Edit-DGVU-IuU.js";import"./Transition-ChWAEdMD.js";import"./KeyboardArrowRight-CpSviFou.js";const ne=()=>{const[v,T]=l.useState(""),[w,y]=l.useState(!1),[c,S]=l.useState(null),[i,h]=l.useState([]),[a,j]=l.useState({reportType:"",generatedDate:"",preparedBy:"",approvalStatus:"",comments:""}),[m,P]=l.useState(0),[p,R]=l.useState(5),b=(t=null)=>{S(t),y(!0),j(t?{...t}:{reportType:"",generatedDate:"",preparedBy:"",approvalStatus:"",comments:""})},x=()=>y(!1),d=t=>{const{name:r,value:n}=t.target;j(f=>({...f,[r]:n}))},D=()=>{const t=new Date().getFullYear(),r=i.length+1;return`REP-${t}-${String(r).padStart(3,"0")}`},B=()=>{if(c){const t=i.map(r=>r.reportId===c.reportId?{...r,...a}:r);h(t)}else{const t={reportId:D(),...a};h([...i,t])}x(),S(null)},E=t=>{if(window.confirm("Are you sure you want to delete this report?")){const n=i.filter(f=>f.reportId!==t);h(n)}},g=i.filter(t=>Object.values(t).some(r=>r.toString().toLowerCase().includes(v.toLowerCase()))),F=()=>{const t=new k,r=g.map(n=>[n.reportId,n.reportType,n.generatedDate,n.preparedBy,n.approvalStatus,n.comments]);t.autoTable({head:[["ID","Type","Date","Prepared By","Status","Comments"]],body:r}),t.save("financial_reports.pdf")};return e.jsxs("div",{children:[e.jsx(u,{variant:"contained",sx:{mt:4,mb:2,backgroundColor:"#7267ef"},onClick:()=>b(),children:"Add Financial Report"}),e.jsxs(N,{open:w,onClose:x,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(O,{sx:{backgroundColor:"#f3f3f3",color:"#7267ef",display:"flex",justifyContent:"space-between"},children:[c?"Edit Financial Report":"Add Financial Report",e.jsx(C,{onClick:x,sx:{color:"#7267ef"},children:e.jsx(A,{})})]}),e.jsx(G,{children:e.jsxs(o,{container:!0,spacing:2,direction:"column",sx:{mt:1},children:[e.jsxs(o,{item:!0,xs:12,children:[e.jsx("label",{children:"Report ID (Auto)"}),e.jsx("input",{className:"input",disabled:!0,value:c?c.reportId:D()})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx("label",{children:"Report Type"}),e.jsxs("select",{className:"input",name:"reportType",value:a.reportType,onChange:d,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Income Statement",children:"Income Statement"}),e.jsx("option",{value:"Balance Sheet",children:"Balance Sheet"}),e.jsx("option",{value:"Cash Flow",children:"Cash Flow"})]})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx("label",{children:"Generated Date"}),e.jsx("input",{type:"date",className:"input",name:"generatedDate",value:a.generatedDate,onChange:d})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx("label",{children:"Prepared By"}),e.jsx("input",{className:"input",name:"preparedBy",value:a.preparedBy,onChange:d})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx("label",{children:"Approval Status"}),e.jsxs("select",{className:"input",name:"approvalStatus",value:a.approvalStatus,onChange:d,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx("label",{children:"Comments"}),e.jsx($,{name:"comments",value:a.comments,onChange:d,className:"input",minRows:3,placeholder:"Enter comments here..."})]})]})}),e.jsxs(Y,{sx:{pr:3,pb:2},children:[e.jsx(u,{onClick:x,sx:{outline:"2px solid #800000",color:"#800000"},children:"Cancel"}),e.jsx(u,{variant:"outlined",onClick:B,sx:{borderColor:"#7267ef",color:"#7267ef"},children:"Submit"})]})]}),e.jsxs(z,{sx:{mt:4,p:2,border:"1px solid #ccc"},children:[e.jsxs(o,{container:!0,justifyContent:"space-between",alignItems:"center",children:[e.jsx(o,{item:!0,children:e.jsx(H,{variant:"h6",gutterBottom:!0,sx:{color:"#7267ef"},children:"Financial Reports"})}),e.jsx(o,{item:!0,children:e.jsx(u,{onClick:F,sx:{backgroundColor:"#7267ef",color:"#fff",mt:2,mb:2},children:"Export PDF"})})]}),e.jsx("input",{type:"text",placeholder:"Search Reports...",value:v,onChange:t=>T(t.target.value),className:"input"}),e.jsxs(L,{children:[e.jsx(Q,{children:e.jsxs(I,{children:[e.jsx(s,{sx:{color:"#7267ef"},children:"ID"}),e.jsx(s,{sx:{color:"#7267ef"},children:"Type"}),e.jsx(s,{sx:{color:"#7267ef"},children:"Date"}),e.jsx(s,{sx:{color:"#7267ef"},children:"Prepared By"}),e.jsx(s,{sx:{color:"#7267ef"},children:"Status"}),e.jsx(s,{sx:{color:"#7267ef"},children:"Comments"}),e.jsx(s,{sx:{color:"#660000"},children:"Actions"})]})}),e.jsx(W,{children:g.slice(m*p,m*p+p).map((t,r)=>e.jsxs(I,{children:[e.jsx(s,{children:t.reportId}),e.jsx(s,{children:t.reportType}),e.jsx(s,{children:t.generatedDate}),e.jsx(s,{children:t.preparedBy}),e.jsx(s,{children:t.approvalStatus}),e.jsx(s,{children:t.comments}),e.jsxs(s,{children:[e.jsx(C,{color:"warning",onClick:()=>b(t),children:e.jsx(_,{sx:{color:"orange"}})}),e.jsx(C,{color:"error",onClick:()=>E(t.reportId),children:e.jsx(J,{sx:{color:"red"}})})]})]},r))})]}),e.jsx(q,{rowsPerPageOptions:[5,10,25],component:"div",count:g.length,rowsPerPage:p,page:m,onPageChange:(t,r)=>P(r),onRowsPerPageChange:t=>R(parseInt(t.target.value,10))})]})]})};export{ne as default};
