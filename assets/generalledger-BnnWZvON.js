import{r as i,j as e}from"./main-DTv03d8r.js";import{E as G}from"./jspdf.plugin.autotable-BtY0fsPl.js";import{C as H}from"./Close-BAEP8ymL.js";import{q as h,D as Q,r as W,I as f,t as Y,H as $,T as z,v as _,w as J,x as I,y as t,z as K}from"./TableRow-DyRCyY9b.js";import{G as a}from"./Grid-C5mdLuvI.js";import{D as M}from"./DialogActions-CMm5oWDU.js";import{E as U,D as V}from"./Edit-DGVU-IuU.js";import{T as X}from"./TablePagination-C-yj9544.js";import"./Transition-ChWAEdMD.js";import"./KeyboardArrowRight-CpSviFou.js";const ie=()=>{const[v,S]=i.useState(""),[T,C]=i.useState(!1),[c,A]=i.useState(null),[d,j]=i.useState([]),[o,m]=i.useState({transactionDate:"",accountName:"",accountType:"",debitAmount:"",creditAmount:"",balance:0,description:"",referenceNumber:"",approvalStatus:""}),[g,y]=i.useState(0),[u,P]=i.useState(5),D=()=>{const n=new Date().getFullYear(),s=d.length+1;return`LED-${n}-${String(s).padStart(3,"0")}`},N=(n=null)=>{A(n),C(!0),m(n?{...n}:{transactionDate:"",accountName:"",accountType:"",debitAmount:"",creditAmount:"",balance:0,description:"",referenceNumber:"",approvalStatus:""})},x=()=>C(!1),l=n=>{const{name:s,value:r}=n.target;m(B=>{const p={...B,[s]:r};if(s==="creditAmount"||s==="debitAmount"){const F=parseFloat(p.creditAmount)||0,O=parseFloat(p.debitAmount)||0,q=c?c.balance:0;p.balance=q+F-O}return p})},E=()=>{if(c){const n=d.map(s=>s.ledgerId===c.ledgerId?{...s,...o}:s);j(n)}else{const n={ledgerId:D(),...o};j([...d,n])}A(null),x()},w=n=>{window.confirm("Are you sure you want to delete this ledger entry?")&&j(d.filter(r=>r.ledgerId!==n))},b=d.filter(n=>Object.values(n).some(s=>s&&s.toString().toLowerCase().includes(v.toLowerCase()))),L=(n,s)=>y(s),R=n=>{P(parseInt(n.target.value,10)),y(0)},k=()=>{const n=new G,s=b.map(r=>[r.ledgerId,r.transactionDate,r.accountName,r.accountType,r.debitAmount,r.creditAmount,r.balance,r.referenceNumber,r.approvalStatus]);n.autoTable({head:[["Ledger ID","Date","Account","Type","Debit","Credit","Balance","Ref No","Status"]],body:s}),n.save("ledger_report.pdf")};return e.jsxs("div",{children:[e.jsx(h,{variant:"contained",sx:{mt:4,mb:2,backgroundColor:"#7267ef"},onClick:()=>N(),children:"Add Ledger Entry"}),e.jsxs(Q,{open:T,onClose:x,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(W,{sx:{backgroundColor:"#f3f3f3",color:"#7267ef",display:"flex",justifyContent:"space-between"},children:[c?"Edit Ledger Entry":"Add Ledger Entry",e.jsx(f,{onClick:x,sx:{color:"#7267ef"},children:e.jsx(H,{})})]}),e.jsx(Y,{children:e.jsxs(a,{container:!0,spacing:2,direction:"column",sx:{mt:1},children:[e.jsxs(a,{item:!0,xs:12,children:[e.jsx("label",{children:"Ledger ID"}),e.jsx("input",{className:"input",disabled:!0,value:c?c.ledgerId:D()})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx("label",{children:"Transaction Date"}),e.jsx("input",{className:"input",type:"date",name:"transactionDate",value:o.transactionDate,onChange:l})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx("label",{children:"Account Name"}),e.jsx("input",{className:"input",name:"accountName",value:o.accountName,onChange:l,placeholder:"e.g., Revenue"})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx("label",{children:"Account Type"}),e.jsxs("select",{className:"input",name:"accountType",value:o.accountType,onChange:l,children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Assets",children:"Assets"}),e.jsx("option",{value:"Liabilities",children:"Liabilities"}),e.jsx("option",{value:"Equity",children:"Equity"}),e.jsx("option",{value:"Revenue",children:"Revenue"}),e.jsx("option",{value:"Expenses",children:"Expenses"})]})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx("label",{children:"Debit Amount"}),e.jsx("input",{className:"input",name:"debitAmount",type:"number",value:o.debitAmount,onChange:l})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx("label",{children:"Credit Amount"}),e.jsx("input",{className:"input",name:"creditAmount",type:"number",value:o.creditAmount,onChange:l})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx("label",{children:"Balance"}),e.jsx("input",{className:"input",name:"balance",type:"number",value:o.balance,disabled:!0})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx("label",{children:"Description"}),e.jsx("input",{className:"input",name:"description",value:o.description,onChange:l,placeholder:"Transaction details..."})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx("label",{children:"Reference Number"}),e.jsx("input",{className:"input",name:"referenceNumber",value:o.referenceNumber,onChange:l})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx("label",{children:"Approval Status"}),e.jsxs("select",{className:"input",name:"approvalStatus",value:o.approvalStatus,onChange:l,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})]})]})}),e.jsxs(M,{sx:{pr:3,pb:2},children:[e.jsx(h,{onClick:x,sx:{outline:"2px solid #800000",color:"#800000"},children:"Cancel"}),e.jsx(h,{variant:"outlined",onClick:E,sx:{borderColor:"#7267ef",color:"#7267ef"},children:"Submit"})]})]}),e.jsxs($,{sx:{mt:4,p:2,border:"1px solid #ccc"},children:[e.jsxs(a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[e.jsx(a,{item:!0,children:e.jsx(z,{variant:"h6",gutterBottom:!0,sx:{color:"#7267ef"},children:"Account Ledger Report"})}),e.jsx(a,{item:!0,children:e.jsx(h,{onClick:k,sx:{backgroundColor:"#7267ef",color:"#fff",mt:2,mb:2},children:"Export PDF"})})]}),e.jsx("input",{type:"text",placeholder:"Search Ledger Entries...",value:v,onChange:n=>S(n.target.value),className:"input"}),e.jsxs(_,{children:[e.jsx(J,{children:e.jsxs(I,{children:[e.jsx(t,{sx:{color:"#7267ef"},children:"Ledger ID"}),e.jsx(t,{sx:{color:"#7267ef"},children:"Date"}),e.jsx(t,{sx:{color:"#7267ef"},children:"Account"}),e.jsx(t,{sx:{color:"#7267ef"},children:"Type"}),e.jsx(t,{sx:{color:"#7267ef"},children:"Debit"}),e.jsx(t,{sx:{color:"#7267ef"},children:"Credit"}),e.jsx(t,{sx:{color:"#7267ef"},children:"Balance"}),e.jsx(t,{sx:{color:"#7267ef"},children:"Ref No"}),e.jsx(t,{sx:{color:"#7267ef"},children:"Status"}),e.jsx(t,{sx:{color:"#660000"},children:"Actions"})]})}),e.jsx(K,{children:b.slice(g*u,g*u+u).map((n,s)=>e.jsxs(I,{children:[e.jsx(t,{children:n.ledgerId}),e.jsx(t,{children:n.transactionDate}),e.jsx(t,{children:n.accountName}),e.jsx(t,{children:n.accountType}),e.jsx(t,{children:n.debitAmount}),e.jsx(t,{children:n.creditAmount}),e.jsx(t,{children:n.balance}),e.jsx(t,{children:n.referenceNumber}),e.jsx(t,{children:n.approvalStatus}),e.jsxs(t,{children:[e.jsx(f,{onClick:()=>N(n),children:e.jsx(U,{sx:{color:"orange"}})}),e.jsx(f,{onClick:()=>w(n.ledgerId),children:e.jsx(V,{sx:{color:"red"}})})]})]},s))})]}),e.jsx(X,{rowsPerPageOptions:[5,10,25],component:"div",count:b.length,rowsPerPage:u,page:g,onPageChange:L,onRowsPerPageChange:R})]})]})};export{ie as default};
