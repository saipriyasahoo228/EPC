import{r as h,j as e}from"./main-DTv03d8r.js";import{C as T}from"./Close-BAEP8ymL.js";import{E as P,D as N}from"./Edit-DGVU-IuU.js";import{q as u,D as B,r as O,I as f,t as W,T as g,H as y,v as U,w as D,x as j,y as r,z as v}from"./TableRow-DyRCyY9b.js";import{G as a}from"./Grid-C5mdLuvI.js";import{D as F}from"./DialogActions-CMm5oWDU.js";import"./Transition-ChWAEdMD.js";const k=["Inventory","Reports","Financial","Accounts Payable","Accounts Receivable","Projects"],X=()=>{const[A,C]=h.useState(!1),[o,m]=h.useState([]),[i,c]=h.useState({name:"",username:"",role:"",permissions:{}}),[d,b]=h.useState(null),w=(s=null)=>{if(s)c({name:s.name,username:s.username,role:s.role,permissions:s.permissions}),b(s.id);else{const n={};k.forEach(l=>{n[l]={read:!1,write:!1,update:!1}}),c({name:"",username:"",role:"",permissions:n}),b(null)}C(!0)},x=()=>C(!1),p=s=>{const{name:n,value:l}=s.target;c(t=>({...t,[n]:l}))},R=(s,n)=>{c(l=>({...l,permissions:{...l.permissions,[s]:{...l.permissions[s],[n]:!l.permissions[s][n]}}}))},E=()=>{if(d){const s=o.map(n=>n.id===d?{...n,...i}:n);m(s)}else{const s={id:`USR-${new Date().getFullYear()}-${String(o.length+1).padStart(3,"0")}`,...i};m([...o,s])}x()},I=s=>{if(window.confirm("Are you sure you want to delete this user?")){const n=o.filter(l=>l.id!==s);m(n)}};return e.jsxs("div",{children:[e.jsx(u,{variant:"contained",sx:{mt:4,mb:2,backgroundColor:"#7267ef"},onClick:()=>w(),children:"Add User with Access Control"}),e.jsxs(B,{open:A,onClose:x,maxWidth:"md",fullWidth:!0,children:[e.jsxs(O,{sx:{backgroundColor:"#f3f3f3",color:"#7267ef",display:"flex",justifyContent:"space-between"},children:[d?"Edit User Access Control":"Add User Access Control",e.jsx(f,{onClick:x,sx:{color:"#7267ef"},children:e.jsx(T,{})})]}),e.jsx(W,{sx:{p:3},children:e.jsxs(a,{container:!0,spacing:2,children:[e.jsxs(a,{item:!0,xs:6,children:[e.jsx("label",{children:"Name"}),e.jsx("input",{className:"input",name:"name",value:i.name,onChange:p,placeholder:"Enter name",style:{width:"100%"}})]}),e.jsxs(a,{item:!0,xs:6,children:[e.jsx("label",{children:"Username"}),e.jsx("input",{className:"input",name:"username",value:i.username,onChange:p,placeholder:"Enter username",style:{width:"100%"}})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx("label",{children:"Role"}),e.jsx("input",{className:"input",name:"role",value:i.role,onChange:p,placeholder:"Enter user role",style:{width:"100%"}})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx(g,{variant:"h6",sx:{color:"#7267ef",mt:2,mb:1},children:"Module Permissions"}),e.jsx(y,{sx:{p:2,border:"1px solid #7267ef",width:"100%",overflowX:"auto"},children:e.jsxs(U,{sx:{minWidth:"800px"},children:[e.jsx(D,{children:e.jsxs(j,{sx:{backgroundColor:"#f3f3f3"},children:[e.jsx(r,{children:e.jsx("strong",{children:"Module"})}),e.jsx(r,{align:"center",children:e.jsx("strong",{children:"Read"})}),e.jsx(r,{align:"center",children:e.jsx("strong",{children:"Write"})}),e.jsx(r,{align:"center",children:e.jsx("strong",{children:"Update"})})]})}),e.jsx(v,{children:k.map(s=>e.jsxs(j,{children:[e.jsx(r,{children:s}),["read","write","update"].map(n=>e.jsx(r,{align:"center",children:e.jsx("input",{type:"checkbox",checked:i.permissions[s]?i.permissions[s][n]:!1,onChange:()=>R(s,n)})},n))]},s))})]})})]})]})}),e.jsxs(F,{sx:{pr:3,pb:2},children:[e.jsx(u,{onClick:x,sx:{outline:"2px solid #800000",color:"#800000"},children:"Cancel"}),e.jsx(u,{variant:"outlined",onClick:E,sx:{borderColor:"#7267ef",color:"#7267ef"},children:d?"Update":"Submit"})]})]}),e.jsxs(y,{sx:{mt:4,p:2,border:"1px solid #ccc"},children:[e.jsx(g,{variant:"h6",sx:{color:"#7267ef",mb:2},children:"User Roles & Permissions Report"}),o.length===0?e.jsx(g,{children:"No records yet."}):e.jsxs(U,{children:[e.jsx(D,{children:e.jsxs(j,{children:[e.jsx(r,{sx:{color:"#7267ef"},children:e.jsx("strong",{children:"User ID"})}),e.jsx(r,{sx:{color:"#7267ef"},children:e.jsx("strong",{children:"Name"})}),e.jsx(r,{sx:{color:"#7267ef"},children:e.jsx("strong",{children:"Username"})}),e.jsx(r,{sx:{color:"#7267ef"},children:e.jsx("strong",{children:"Role"})}),e.jsx(r,{sx:{color:"#7267ef"},children:e.jsx("strong",{children:"Permissions"})}),e.jsx(r,{sx:{color:"#7267ef"},children:e.jsx("strong",{children:"Actions"})})]})}),e.jsx(v,{children:o.map((s,n)=>e.jsxs(j,{children:[e.jsx(r,{children:s.id}),e.jsx(r,{children:s.name}),e.jsx(r,{children:s.username}),e.jsx(r,{children:s.role}),e.jsx(r,{children:Object.entries(s.permissions).filter(([l,t])=>Object.values(t).some(Boolean)).map(([l,t])=>e.jsxs("div",{children:[e.jsxs("strong",{children:[l,":"]})," ",["read","write","update"].filter(S=>t[S]).join(", ")]},l))}),e.jsxs(r,{children:[e.jsx(f,{color:"primary",onClick:()=>w(s),children:e.jsx(P,{sx:{color:"orange"}})}),e.jsx(f,{color:"error",onClick:()=>I(s.id),children:e.jsx(N,{sx:{color:"red"}})})]})]},n))})]})]})]})};export{X as default};
