import{r as l,j as e,T as F}from"./main-IxGEKZMA.js";import{E as A}from"./jspdf.plugin.autotable-BR5kQNfz.js";import{C as N}from"./Close-DoqWsXz3.js";import{e as u,D as O,f as G,I as C,g as L,t as Q,T as W,h as $,i as T,j as s,k as z}from"./TableRow-CRAT5KT_.js";import{G as o}from"./Grid-C72N-tAO.js";import{T as H}from"./Select-CDJTZGaT.js";import{D as Y}from"./DialogActions-D5wP0Mt-.js";import{E as _}from"./Edit-g2hjeeYC.js";import{D as q}from"./Delete-cHl_EB0l.js";import{T as J}from"./TablePagination-DkVFCvhA.js";import"./Transition-C29ZPDdz.js";import"./dividerClasses-DK6Syutt.js";import"./KeyboardArrowRight-Y-VTRWJY.js";const le=()=>{const[v,I]=l.useState(""),[P,y]=l.useState(!1),[c,S]=l.useState(null),[i,h]=l.useState([]),[a,m]=l.useState({reportType:"",generatedDate:"",preparedBy:"",approvalStatus:"",comments:""}),[j,R]=l.useState(0),[p,w]=l.useState(5),b=(t=null)=>{S(t),y(!0),m(t?{...t}:{reportType:"",generatedDate:"",preparedBy:"",approvalStatus:"",comments:""})},x=()=>y(!1),d=t=>{const{name:r,value:n}=t.target;m(g=>({...g,[r]:n}))},D=()=>{const t=new Date().getFullYear(),r=i.length+1;return`REP-${t}-${String(r).padStart(3,"0")}`},B=()=>{if(c){const t=i.map(r=>r.reportId===c.reportId?{...r,...a}:r);h(t)}else{const t={reportId:D(),...a};h([...i,t])}x(),S(null)},k=t=>{if(window.confirm("Are you sure you want to delete this report?")){const n=i.filter(g=>g.reportId!==t);h(n)}},f=i.filter(t=>Object.values(t).some(r=>r.toString().toLowerCase().includes(v.toLowerCase()))),E=()=>{const t=new A,r=f.map(n=>[n.reportId,n.reportType,n.generatedDate,n.preparedBy,n.approvalStatus,n.comments]);t.autoTable({head:[["ID","Type","Date","Prepared By","Status","Comments"]],body:r}),t.save("financial_reports.pdf")};return e.jsxs("div",{children:[e.jsx(u,{variant:"contained",sx:{mt:4,mb:2,backgroundColor:"#7267ef"},onClick:()=>b(),children:"Add Financial Report"}),e.jsxs(O,{open:P,onClose:x,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(G,{sx:{backgroundColor:"#f3f3f3",color:"#7267ef",display:"flex",justifyContent:"space-between"},children:[c?"Edit Financial Report":"Add Financial Report",e.jsx(C,{onClick:x,sx:{color:"#7267ef"},children:e.jsx(N,{})})]}),e.jsx(L,{children:e.jsxs(o,{container:!0,spacing:2,direction:"column",sx:{mt:1},children:[e.jsxs(o,{item:!0,xs:12,children:[e.jsx("label",{children:"Report ID (Auto)"}),e.jsx("input",{className:"input",disabled:!0,value:c?c.reportId:D()})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx("label",{children:"Report Type"}),e.jsxs("select",{className:"input",name:"reportType",value:a.reportType,onChange:d,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Income Statement",children:"Income Statement"}),e.jsx("option",{value:"Balance Sheet",children:"Balance Sheet"}),e.jsx("option",{value:"Cash Flow",children:"Cash Flow"})]})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx("label",{children:"Generated Date"}),e.jsx("input",{type:"date",className:"input",name:"generatedDate",value:a.generatedDate,onChange:d})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx("label",{children:"Prepared By"}),e.jsx("input",{className:"input",name:"preparedBy",value:a.preparedBy,onChange:d})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx("label",{children:"Approval Status"}),e.jsxs("select",{className:"input",name:"approvalStatus",value:a.approvalStatus,onChange:d,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx("label",{children:"Comments"}),e.jsx(H,{name:"comments",value:a.comments,onChange:d,className:"input",minRows:3,placeholder:"Enter comments here..."})]})]})}),e.jsxs(Y,{sx:{pr:3,pb:2},children:[e.jsx(u,{onClick:x,sx:{outline:"2px solid #800000",color:"#800000"},children:"Cancel"}),e.jsx(u,{variant:"outlined",onClick:B,sx:{borderColor:"#7267ef",color:"#7267ef"},children:"Submit"})]})]}),e.jsxs(Q,{sx:{mt:4,p:2,border:"1px solid #ccc"},children:[e.jsxs(o,{container:!0,justifyContent:"space-between",alignItems:"center",children:[e.jsx(o,{item:!0,children:e.jsx(F,{variant:"h6",gutterBottom:!0,sx:{color:"#7267ef"},children:"Financial Reports"})}),e.jsx(o,{item:!0,children:e.jsx(u,{onClick:E,sx:{backgroundColor:"#7267ef",color:"#fff",mt:2,mb:2},children:"Export PDF"})})]}),e.jsx("input",{type:"text",placeholder:"Search Reports...",value:v,onChange:t=>I(t.target.value),className:"input"}),e.jsxs(W,{children:[e.jsx($,{children:e.jsxs(T,{children:[e.jsx(s,{sx:{color:"#7267ef"},children:"ID"}),e.jsx(s,{sx:{color:"#7267ef"},children:"Type"}),e.jsx(s,{sx:{color:"#7267ef"},children:"Date"}),e.jsx(s,{sx:{color:"#7267ef"},children:"Prepared By"}),e.jsx(s,{sx:{color:"#7267ef"},children:"Status"}),e.jsx(s,{sx:{color:"#7267ef"},children:"Comments"}),e.jsx(s,{sx:{color:"#660000"},children:"Actions"})]})}),e.jsx(z,{children:f.slice(j*p,j*p+p).map((t,r)=>e.jsxs(T,{children:[e.jsx(s,{children:t.reportId}),e.jsx(s,{children:t.reportType}),e.jsx(s,{children:t.generatedDate}),e.jsx(s,{children:t.preparedBy}),e.jsx(s,{children:t.approvalStatus}),e.jsx(s,{children:t.comments}),e.jsxs(s,{children:[e.jsx(C,{color:"warning",onClick:()=>b(t),children:e.jsx(_,{sx:{color:"orange"}})}),e.jsx(C,{color:"error",onClick:()=>k(t.reportId),children:e.jsx(q,{sx:{color:"red"}})})]})]},r))})]}),e.jsx(J,{rowsPerPageOptions:[5,10,25],component:"div",count:f.length,rowsPerPage:p,page:j,onPageChange:(t,r)=>R(r),onRowsPerPageChange:t=>w(parseInt(t.target.value,10))})]})]})};export{le as default};
