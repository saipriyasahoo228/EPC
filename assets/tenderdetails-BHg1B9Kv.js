import{i as Ae,k as Ve,r as c,m as We,n as ie,j as e,o as ue,q as lt,t as Fe,v as it,w as Le,x as Dt,y as kt,z as ze,A as pe,D as Et,I as Ge,E as u,T as y,G as It,H as Mt,J as me,S as Ze,K as Qe}from"./main-Skim5IJC.js";import{E as Bt}from"./jspdf.plugin.autotable-Aj3tGQhx.js";import{b as Rt,c as zt,a as Ne,u as Nt,d as Pt,e as At}from"./tenderAllocation-fUAxLPxU.js";import{T as Je}from"./Tooltip-YrZkw7B4.js";import{c as G,M as Vt,a as Wt}from"./minimize-2-RCuvNn0X.js";import{o as at,B as et,D as Ft,a as Lt,b as $t,c as Ht}from"./DialogTitle-CvDFHAwp.js";import{u as ct}from"./index-Pp9EW3wT.js";import{d as dt,u as Ee}from"./useSlotProps-CCL6Y0ZK.js";import{K as Kt,a as Yt}from"./KeyboardArrowRight-BzCb_W4p.js";import{C as qt}from"./Chip-DTcaVcsg.js";import{f as be}from"./date-DdrLtg20.js";import"./useControlled-CHkDrNg3.js";function Ot(r){return Ve("MuiTab",r)}const X=Ae("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),Ut=r=>{const{classes:o,textColor:a,fullWidth:C,wrapped:m,icon:v,label:D,selected:k,disabled:h}=r,P={root:["root",v&&D&&"labelIcon",`textColor${lt(a)}`,C&&"fullWidth",m&&"wrapped",k&&"selected",h&&"disabled"],icon:["iconWrapper","icon"]};return Fe(P,Ot,o)},Xt=ue(it,{name:"MuiTab",slot:"Root",overridesResolver:(r,o)=>{const{ownerState:a}=r;return[o.root,a.label&&a.icon&&o.labelIcon,o[`textColor${lt(a.textColor)}`],a.fullWidth&&o.fullWidth,a.wrapped&&o.wrapped,{[`& .${X.iconWrapper}`]:o.iconWrapper},{[`& .${X.icon}`]:o.icon}]}})(Le(({theme:r})=>({...r.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:o})=>o.label&&(o.iconPosition==="top"||o.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:o})=>o.label&&o.iconPosition!=="top"&&o.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:o})=>o.icon&&o.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:o,iconPosition:a})=>o.icon&&o.label&&a==="top",style:{[`& > .${X.icon}`]:{marginBottom:6}}},{props:({ownerState:o,iconPosition:a})=>o.icon&&o.label&&a==="bottom",style:{[`& > .${X.icon}`]:{marginTop:6}}},{props:({ownerState:o,iconPosition:a})=>o.icon&&o.label&&a==="start",style:{[`& > .${X.icon}`]:{marginRight:r.spacing(1)}}},{props:({ownerState:o,iconPosition:a})=>o.icon&&o.label&&a==="end",style:{[`& > .${X.icon}`]:{marginLeft:r.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${X.selected}`]:{opacity:1},[`&.${X.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(r.vars||r).palette.text.secondary,[`&.${X.selected}`]:{color:(r.vars||r).palette.primary.main},[`&.${X.disabled}`]:{color:(r.vars||r).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(r.vars||r).palette.text.secondary,[`&.${X.selected}`]:{color:(r.vars||r).palette.secondary.main},[`&.${X.disabled}`]:{color:(r.vars||r).palette.text.disabled}}},{props:({ownerState:o})=>o.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:o})=>o.wrapped,style:{fontSize:r.typography.pxToRem(12)}}]}))),fe=c.forwardRef(function(o,a){const C=We({props:o,name:"MuiTab"}),{className:m,disabled:v=!1,disableFocusRipple:D=!1,fullWidth:k,icon:h,iconPosition:P="top",indicator:R,label:z,onChange:b,onClick:M,onFocus:L,selected:Y,selectionFollowsFocus:A,textColor:$="inherit",value:V,wrapped:i=!1,...W}=C,J={...C,disabled:v,disableFocusRipple:D,selected:Y,icon:!!h,iconPosition:P,label:!!z,fullWidth:k,textColor:$,wrapped:i},p=Ut(J),ne=h&&z&&c.isValidElement(h)?c.cloneElement(h,{className:ie(p.icon,h.props.className)}):h,se=d=>{!Y&&b&&b(d,V),M&&M(d)},T=d=>{A&&!Y&&b&&b(d,V),L&&L(d)};return e.jsxs(Xt,{focusRipple:!D,className:ie(p.root,m),ref:a,role:"tab","aria-selected":Y,disabled:v,onClick:se,onFocus:T,ownerState:J,tabIndex:Y?0:-1,...W,children:[P==="top"||P==="start"?e.jsxs(c.Fragment,{children:[ne,z]}):e.jsxs(c.Fragment,{children:[z,ne]}),R]})});function Gt(r){return(1+Math.sin(Math.PI*r-Math.PI/2))/2}function Zt(r,o,a,C={},m=()=>{}){const{ease:v=Gt,duration:D=300}=C;let k=null;const h=o[r];let P=!1;const R=()=>{P=!0},z=b=>{if(P){m(new Error("Animation cancelled"));return}k===null&&(k=b);const M=Math.min(1,(b-k)/D);if(o[r]=v(M)*(a-h)+h,M>=1){requestAnimationFrame(()=>{m(null)});return}requestAnimationFrame(z)};return h===a?(m(new Error("Element already at target position")),R):(requestAnimationFrame(z),R)}const Qt={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Jt(r){const{onChange:o,...a}=r,C=c.useRef(),m=c.useRef(null),v=()=>{C.current=m.current.offsetHeight-m.current.clientHeight};return Dt(()=>{const D=dt(()=>{const h=C.current;v(),h!==C.current&&o(C.current)}),k=at(m.current);return k.addEventListener("resize",D),()=>{D.clear(),k.removeEventListener("resize",D)}},[o]),c.useEffect(()=>{v(),o(C.current)},[o]),e.jsx("div",{style:Qt,...a,ref:m})}function eo(r){return Ve("MuiTabScrollButton",r)}const to=Ae("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),oo=r=>{const{classes:o,orientation:a,disabled:C}=r;return Fe({root:["root",a,C&&"disabled"]},eo,o)},ro=ue(it,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(r,o)=>{const{ownerState:a}=r;return[o.root,a.orientation&&o[a.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${to.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),no=c.forwardRef(function(o,a){const C=We({props:o,name:"MuiTabScrollButton"}),{className:m,slots:v={},slotProps:D={},direction:k,orientation:h,disabled:P,...R}=C,z=ct(),b={isRtl:z,...C},M=oo(b),L=v.StartScrollButtonIcon??Kt,Y=v.EndScrollButtonIcon??Yt,A=Ee({elementType:L,externalSlotProps:D.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:b}),$=Ee({elementType:Y,externalSlotProps:D.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:b});return e.jsx(ro,{component:"div",className:ie(M.root,m),ref:a,role:null,ownerState:b,tabIndex:null,...R,style:{...R.style,...h==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${z?-90:90}deg)`}},children:k==="left"?e.jsx(L,{...A}):e.jsx(Y,{...$})})});function so(r){return Ve("MuiTabs",r)}const Pe=Ae("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),tt=(r,o)=>r===o?r.firstChild:o&&o.nextElementSibling?o.nextElementSibling:r.firstChild,ot=(r,o)=>r===o?r.lastChild:o&&o.previousElementSibling?o.previousElementSibling:r.lastChild,_e=(r,o,a)=>{let C=!1,m=a(r,o);for(;m;){if(m===r.firstChild){if(C)return;C=!0}const v=m.disabled||m.getAttribute("aria-disabled")==="true";if(!m.hasAttribute("tabindex")||v)m=a(r,m);else{m.focus();return}}},lo=r=>{const{vertical:o,fixed:a,hideScrollbar:C,scrollableX:m,scrollableY:v,centered:D,scrollButtonsHideMobile:k,classes:h}=r;return Fe({root:["root",o&&"vertical"],scroller:["scroller",a&&"fixed",C&&"hideScrollbar",m&&"scrollableX",v&&"scrollableY"],list:["list","flexContainer",o&&"flexContainerVertical",o&&"vertical",D&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",k&&"scrollButtonsHideMobile"],scrollableX:[m&&"scrollableX"],hideScrollbar:[C&&"hideScrollbar"]},so,h)},io=ue("div",{name:"MuiTabs",slot:"Root",overridesResolver:(r,o)=>{const{ownerState:a}=r;return[{[`& .${Pe.scrollButtons}`]:o.scrollButtons},{[`& .${Pe.scrollButtons}`]:a.scrollButtonsHideMobile&&o.scrollButtonsHideMobile},o.root,a.vertical&&o.vertical]}})(Le(({theme:r})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:o})=>o.vertical,style:{flexDirection:"column"}},{props:({ownerState:o})=>o.scrollButtonsHideMobile,style:{[`& .${Pe.scrollButtons}`]:{[r.breakpoints.down("sm")]:{display:"none"}}}}]}))),ao=ue("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(r,o)=>{const{ownerState:a}=r;return[o.scroller,a.fixed&&o.fixed,a.hideScrollbar&&o.hideScrollbar,a.scrollableX&&o.scrollableX,a.scrollableY&&o.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:r})=>r.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:r})=>r.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:r})=>r.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:r})=>r.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),co=ue("div",{name:"MuiTabs",slot:"List",overridesResolver:(r,o)=>{const{ownerState:a}=r;return[o.list,o.flexContainer,a.vertical&&o.flexContainerVertical,a.centered&&o.centered]}})({display:"flex",variants:[{props:({ownerState:r})=>r.vertical,style:{flexDirection:"column"}},{props:({ownerState:r})=>r.centered,style:{justifyContent:"center"}}]}),uo=ue("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(r,o)=>o.indicator})(Le(({theme:r})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:r.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(r.vars||r).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(r.vars||r).palette.secondary.main}},{props:({ownerState:o})=>o.vertical,style:{height:"100%",width:2,right:0}}]}))),ho=ue(Jt)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),rt={},nt=c.forwardRef(function(o,a){const C=We({props:o,name:"MuiTabs"}),m=kt(),v=ct(),{"aria-label":D,"aria-labelledby":k,action:h,centered:P=!1,children:R,className:z,component:b="div",allowScrollButtonsMobile:M=!1,indicatorColor:L="primary",onChange:Y,orientation:A="horizontal",ScrollButtonComponent:$,scrollButtons:V="auto",selectionFollowsFocus:i,slots:W={},slotProps:J={},TabIndicatorProps:p={},TabScrollButtonProps:ne={},textColor:se="primary",value:T,variant:d="standard",visibleScrollbar:f=!1,..._}=C,j=d==="scrollable",E=A==="vertical",x=E?"scrollTop":"scrollLeft",N=E?"top":"left",I=E?"bottom":"right",ee=E?"clientHeight":"clientWidth",Z=E?"height":"width",Q={...C,component:b,allowScrollButtonsMobile:M,indicatorColor:L,orientation:A,vertical:E,scrollButtons:V,textColor:se,variant:d,visibleScrollbar:f,fixed:!j,hideScrollbar:j&&!f,scrollableX:j&&!E,scrollableY:j&&E,centered:P&&!j,scrollButtonsHideMobile:!M},te=lo(Q),Ie=Ee({elementType:W.StartScrollButtonIcon,externalSlotProps:J.startScrollButtonIcon,ownerState:Q}),ge=Ee({elementType:W.EndScrollButtonIcon,externalSlotProps:J.endScrollButtonIcon,ownerState:Q}),[ae,je]=c.useState(!1),[oe,ve]=c.useState(rt),[t,n]=c.useState(!1),[g,q]=c.useState(!1),[H,F]=c.useState(!1),[O,K]=c.useState({overflow:"hidden",scrollbarWidth:0}),le=new Map,U=c.useRef(null),ce=c.useRef(null),he={slots:W,slotProps:{indicator:p,scrollButton:ne,...J}},$e=()=>{const s=U.current;let l;if(s){const w=s.getBoundingClientRect();l={clientWidth:s.clientWidth,scrollLeft:s.scrollLeft,scrollTop:s.scrollTop,scrollWidth:s.scrollWidth,top:w.top,bottom:w.bottom,left:w.left,right:w.right}}let S;if(s&&T!==!1){const w=ce.current.children;if(w.length>0){const B=w[le.get(T)];S=B?B.getBoundingClientRect():null}}return{tabsMeta:l,tabMeta:S}},xe=ze(()=>{const{tabsMeta:s,tabMeta:l}=$e();let S=0,w;E?(w="top",l&&s&&(S=l.top-s.top+s.scrollTop)):(w=v?"right":"left",l&&s&&(S=(v?-1:1)*(l[w]-s[w]+s.scrollLeft)));const B={[w]:S,[Z]:l?l[Z]:0};if(typeof oe[w]!="number"||typeof oe[Z]!="number")ve(B);else{const re=Math.abs(oe[w]-B[w]),de=Math.abs(oe[Z]-B[Z]);(re>=1||de>=1)&&ve(B)}}),Me=(s,{animation:l=!0}={})=>{l?Zt(x,U.current,s,{duration:m.transitions.duration.standard}):U.current[x]=s},He=s=>{let l=U.current[x];E?l+=s:l+=s*(v?-1:1),Me(l)},Ke=()=>{const s=U.current[ee];let l=0;const S=Array.from(ce.current.children);for(let w=0;w<S.length;w+=1){const B=S[w];if(l+B[ee]>s){w===0&&(l=s);break}l+=B[ee]}return l},ut=()=>{He(-1*Ke())},ht=()=>{He(Ke())},[pt,{onChange:Se,...ft}]=pe("scrollbar",{className:ie(te.scrollableX,te.hideScrollbar),elementType:ho,shouldForwardComponentProp:!0,externalForwardedProps:he,ownerState:Q}),xt=c.useCallback(s=>{Se==null||Se(s),K({overflow:null,scrollbarWidth:s})},[Se]),[Ye,qe]=pe("scrollButtons",{className:ie(te.scrollButtons,ne.className),elementType:no,externalForwardedProps:he,ownerState:Q,additionalProps:{orientation:A,slots:{StartScrollButtonIcon:W.startScrollButtonIcon||W.StartScrollButtonIcon,EndScrollButtonIcon:W.endScrollButtonIcon||W.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:Ie,endScrollButtonIcon:ge}}}),yt=()=>{const s={};s.scrollbarSizeListener=j?e.jsx(pt,{...ft,onChange:xt}):null;const S=j&&(V==="auto"&&(t||g)||V===!0);return s.scrollButtonStart=S?e.jsx(Ye,{direction:v?"right":"left",onClick:ut,disabled:!t,...qe}):null,s.scrollButtonEnd=S?e.jsx(Ye,{direction:v?"left":"right",onClick:ht,disabled:!g,...qe}):null,s},Oe=ze(s=>{const{tabsMeta:l,tabMeta:S}=$e();if(!(!S||!l)){if(S[N]<l[N]){const w=l[x]+(S[N]-l[N]);Me(w,{animation:s})}else if(S[I]>l[I]){const w=l[x]+(S[I]-l[I]);Me(w,{animation:s})}}}),Ce=ze(()=>{j&&V!==!1&&F(!H)});c.useEffect(()=>{const s=dt(()=>{U.current&&xe()});let l;const S=re=>{re.forEach(de=>{de.removedNodes.forEach(ye=>{l==null||l.unobserve(ye)}),de.addedNodes.forEach(ye=>{l==null||l.observe(ye)})}),s(),Ce()},w=at(U.current);w.addEventListener("resize",s);let B;return typeof ResizeObserver<"u"&&(l=new ResizeObserver(s),Array.from(ce.current.children).forEach(re=>{l.observe(re)})),typeof MutationObserver<"u"&&(B=new MutationObserver(S),B.observe(ce.current,{childList:!0})),()=>{s.clear(),w.removeEventListener("resize",s),B==null||B.disconnect(),l==null||l.disconnect()}},[xe,Ce]),c.useEffect(()=>{const s=Array.from(ce.current.children),l=s.length;if(typeof IntersectionObserver<"u"&&l>0&&j&&V!==!1){const S=s[0],w=s[l-1],B={root:U.current,threshold:.99},re=Re=>{n(!Re[0].isIntersecting)},de=new IntersectionObserver(re,B);de.observe(S);const ye=Re=>{q(!Re[0].isIntersecting)},Xe=new IntersectionObserver(ye,B);return Xe.observe(w),()=>{de.disconnect(),Xe.disconnect()}}},[j,V,H,R==null?void 0:R.length]),c.useEffect(()=>{je(!0)},[]),c.useEffect(()=>{xe()}),c.useEffect(()=>{Oe(rt!==oe)},[Oe,oe]),c.useImperativeHandle(h,()=>({updateIndicator:xe,updateScrollButtons:Ce}),[xe,Ce]);const[mt,bt]=pe("indicator",{className:ie(te.indicator,p.className),elementType:uo,externalForwardedProps:he,ownerState:Q,additionalProps:{style:oe}}),Ue=e.jsx(mt,{...bt});let we=0;const gt=c.Children.map(R,s=>{if(!c.isValidElement(s))return null;const l=s.props.value===void 0?we:s.props.value;le.set(l,we);const S=l===T;return we+=1,c.cloneElement(s,{fullWidth:d==="fullWidth",indicator:S&&!ae&&Ue,selected:S,selectionFollowsFocus:i,onChange:Y,textColor:se,value:l,...we===1&&T===!1&&!s.props.tabIndex?{tabIndex:0}:{}})}),jt=s=>{if(s.altKey||s.shiftKey||s.ctrlKey||s.metaKey)return;const l=ce.current,S=Et(l).activeElement;if(S.getAttribute("role")!=="tab")return;let B=A==="horizontal"?"ArrowLeft":"ArrowUp",re=A==="horizontal"?"ArrowRight":"ArrowDown";switch(A==="horizontal"&&v&&(B="ArrowRight",re="ArrowLeft"),s.key){case B:s.preventDefault(),_e(l,S,ot);break;case re:s.preventDefault(),_e(l,S,tt);break;case"Home":s.preventDefault(),_e(l,null,tt);break;case"End":s.preventDefault(),_e(l,null,ot);break}},Be=yt(),[vt,St]=pe("root",{ref:a,className:ie(te.root,z),elementType:io,externalForwardedProps:{...he,..._,component:b},ownerState:Q}),[Ct,wt]=pe("scroller",{ref:U,className:te.scroller,elementType:ao,externalForwardedProps:he,ownerState:Q,additionalProps:{style:{overflow:O.overflow,[E?`margin${v?"Left":"Right"}`:"marginBottom"]:f?void 0:-O.scrollbarWidth}}}),[_t,Tt]=pe("list",{ref:ce,className:ie(te.list,te.flexContainer),elementType:co,externalForwardedProps:he,ownerState:Q,getSlotProps:s=>({...s,onKeyDown:l=>{var S;jt(l),(S=s.onKeyDown)==null||S.call(s,l)}})});return e.jsxs(vt,{...St,children:[Be.scrollButtonStart,Be.scrollbarSizeListener,e.jsxs(Ct,{...wt,children:[e.jsx(_t,{"aria-label":D,"aria-labelledby":k,"aria-orientation":A==="vertical"?"vertical":null,role:"tablist",...Tt,children:gt}),ae&&Ue]}),Be.scrollButtonEnd]})});/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],fo=G("clock",po);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],yo=G("download",xo);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bo=G("eye",mo);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}]],Te=G("file-minus",go);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],De=G("file-plus",jo);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],So=G("file-text",vo);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],ke=G("git-merge",Co);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],_o=G("history",wo);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Do=G("pencil",To);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],Eo=G("trash",ko);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],st=G("user",Io);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Bo=G("x",Mo),Ro=({tenderId:r,triggerVariant:o="button"})=>{const[a,C]=c.useState(!1),[m,v]=c.useState(!1),[D,k]=c.useState(null),[h,P]=c.useState([]),[R,z]=c.useState([]),[b,M]=c.useState(null),[L,Y]=c.useState("changes"),[A,$]=c.useState("cards"),V=()=>{C(!0)},i=()=>{if(!h||h.length===0)return e.jsx(u,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:e.jsx(y,{color:"text.secondary",children:"No versions to compare."})});const d=new Map;h.forEach(x=>d.set(x.history_id,x.changes||{}));const f=["history_id","history_user","history_date","history_change_reason","history_type"],_=new Set;R.forEach(x=>{Object.keys(x).forEach(N=>{f.includes(N)||_.add(N)})});const j=Array.from(_),E=new Map(R.map(x=>[x.history_id,x]));return e.jsxs(u,{component:me,variant:"outlined",sx:{mt:2,p:1,overflowX:"auto"},children:[e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:`240px repeat(${h.length}, minmax(200px, 1fr))`,gap:1,p:1,borderBottom:"1px solid #eee"},children:[e.jsx(u,{}),h.map(x=>e.jsxs(u,{display:"flex",alignItems:"center",gap:1,children:[x.history_type==="+"?e.jsx(De,{size:14,color:"#4caf50"}):x.history_type==="~"?e.jsx(ke,{size:14,color:"#ff9800"}):e.jsx(Te,{size:14,color:"#f44336"}),e.jsxs(y,{variant:"caption",color:"text.secondary",children:["Version ",x.history_id]})]},x.history_id))]}),j.map(x=>e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:`240px repeat(${h.length}, minmax(200px, 1fr))`,gap:1,p:1,borderBottom:"1px dashed #eee"},children:[e.jsx(y,{variant:"body2",fontWeight:"bold",sx:{textTransform:"capitalize"},children:x.replace(/_/g," ")}),h.map(N=>{const I=E.get(N.history_id),ee=I?I[x]:void 0,Z=!!(d.get(N.history_id)||{})[x];return e.jsx(u,{sx:{p:1,borderRadius:1,backgroundColor:Z?"#f4faff":"transparent",border:Z?"1px solid #90caf9":"1px solid transparent"},children:e.jsx(y,{variant:"body2",color:Z?"primary.main":"text.secondary",children:ee==null||ee===""?"—":String(ee)})},N.history_id)})]},x))]})},W=()=>{if(!h||h.length===0)return e.jsx(u,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:e.jsx(y,{color:"text.secondary",children:"No versions to compare."})});const d=new Set;h.forEach(_=>Object.keys(_.changes||{}).forEach(j=>d.add(j)));const f=Array.from(d);return e.jsxs(u,{component:me,variant:"outlined",sx:{mt:2,p:1,overflowX:"auto"},children:[e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:`240px repeat(${h.length}, minmax(180px, 1fr))`,gap:1,p:1,borderBottom:"1px solid #eee"},children:[e.jsx(u,{}),h.map((_,j)=>e.jsxs(u,{display:"flex",alignItems:"center",gap:1,children:[_.history_type==="+"?e.jsx(De,{size:14,color:"#4caf50"}):_.history_type==="~"?e.jsx(ke,{size:14,color:"#ff9800"}):e.jsx(Te,{size:14,color:"#f44336"}),e.jsxs(y,{variant:"caption",color:"text.secondary",children:["Version ",_.history_id]})]},_.history_id))]}),f.map(_=>e.jsxs(u,{sx:{display:"grid",gridTemplateColumns:`240px repeat(${h.length}, minmax(180px, 1fr))`,gap:1,p:1,borderBottom:"1px dashed #eee"},children:[e.jsx(y,{variant:"body2",fontWeight:"bold",sx:{textTransform:"capitalize"},children:_.replace(/_/g," ")}),h.map((j,E)=>{const x=(j.changes||{})[_];return x?e.jsxs(u,{children:[e.jsxs(u,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(y,{variant:"body2",sx:{textDecoration:"line-through"},color:"error.main",children:String(x.old)}),e.jsx(y,{variant:"body2",children:"→"}),e.jsx(y,{variant:"body2",color:"success.main",children:String(x.new)})]}),e.jsx(y,{variant:"caption",color:"text.secondary",children:new Date(j.history_date).toLocaleString()})]},E):e.jsx(y,{variant:"body2",color:"text.secondary",children:"—"},E)})]},_))]})},J=()=>!h||h.length===0?e.jsx(u,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:e.jsx(y,{color:"text.secondary",children:"No versions to compare."})}):e.jsx(u,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:2,mt:2},children:h.map((d,f)=>{var j,E;const _=Object.entries(d.changes||{});return e.jsxs(me,{variant:"outlined",sx:{p:2,borderRadius:2},children:[e.jsxs(u,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[e.jsxs(u,{display:"flex",alignItems:"center",gap:1.25,children:[d.history_type==="+"?e.jsx(De,{size:16,color:"#4caf50"}):d.history_type==="~"?e.jsx(ke,{size:16,color:"#ff9800"}):e.jsx(Te,{size:16,color:"#f44336"}),e.jsxs(y,{variant:"subtitle2",fontWeight:"bold",children:["Version ",d.history_id]})]}),e.jsx(y,{variant:"caption",color:"text.secondary",children:new Date(d.history_date).toLocaleString()})]}),e.jsxs(u,{display:"flex",alignItems:"center",gap:1,mb:1,color:"text.secondary",children:[e.jsx(st,{size:14}),e.jsxs(y,{variant:"caption",children:[(j=d.history_user)==null?void 0:j.full_name," (",(E=d.history_user)==null?void 0:E.user_id,")"]})]}),_.length===0?e.jsx(y,{variant:"body2",color:"text.secondary",children:"No changes in this version."}):e.jsx(u,{sx:{mt:1},children:_.map(([x,N])=>e.jsxs(u,{sx:{py:.75,borderBottom:"1px dashed #eee"},children:[e.jsx(y,{variant:"overline",sx:{textTransform:"capitalize"},color:"text.secondary",children:x.replace(/_/g," ")}),e.jsxs(u,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(y,{variant:"body2",sx:{textDecoration:"line-through"},color:"error.main",children:String(N==null?void 0:N.old)}),e.jsx(y,{variant:"body2",children:"→"}),e.jsx(y,{variant:"body2",color:"success.main",children:String(N==null?void 0:N.new)})]})]},x))})]},d.history_id)})}),p=()=>{C(!1),P([]),z([]),M(null),k(null)};c.useEffect(()=>{(async()=>{if(!(!a||!r)){v(!0),k(null);try{console.log("[AuditTrail] Fetching diffs & snapshots for tenderId:",r);const[f,_]=await Promise.all([Rt(r),zt(r)]);console.log("[AuditTrail] Diffs:",f),console.log("[AuditTrail] Snapshots:",_);const j=(f||[]).sort((E,x)=>new Date(x.history_date)-new Date(E.history_date));P(j),z(_||[]),M(j[0]||null)}catch(f){console.error("[AuditTrail] Fetch error:",f),k("Failed to fetch audit trail. Please try again.")}finally{v(!1)}}})()},[a,r]);const ne=d=>{switch(d){case"+":return e.jsx(De,{size:18,color:"#4caf50"});case"~":return e.jsx(ke,{size:18,color:"#ff9800"});case"-":return e.jsx(Te,{size:18,color:"#f44336"});default:return e.jsx(So,{size:18})}},se=d=>{const f=Object.keys(d);return f.length===0?e.jsx(y,{variant:"body2",color:"text.secondary",children:"No changes in this version."}):e.jsx(u,{component:me,variant:"outlined",p:2,mt:2,sx:{maxHeight:"calc(100vh - 400px)",overflowY:"auto"},children:f.map(_=>e.jsxs(u,{mb:2,children:[e.jsx(y,{variant:"overline",color:"text.secondary",sx:{textTransform:"capitalize"},children:_.replace(/_/g," ")}),e.jsxs(u,{display:"flex",alignItems:"center",mt:.5,children:[e.jsx(y,{variant:"body2",color:"error.main",sx:{textDecoration:"line-through",mr:1},children:String(d[_].old)}),e.jsx(y,{variant:"body2",sx:{mx:1},children:"→"}),e.jsx(y,{variant:"body2",color:"success.main",children:String(d[_].new)})]})]},_))})},T=()=>{if(!b)return null;const d=R.find(j=>j.history_id===b.history_id);if(!d)return e.jsx(y,{children:"Snapshot not available."});const f=["history_id","history_user","history_date","history_change_reason","history_type"],_=new Set(Object.keys((b==null?void 0:b.changes)||{}));return e.jsx(u,{component:me,variant:"outlined",p:2,mt:2,sx:{maxHeight:"calc(100vh - 400px)",overflowY:"auto"},children:Object.entries(d).map(([j,E])=>{if(f.includes(j))return null;const x=_.has(j);return e.jsxs(u,{display:"flex",alignItems:"center",justifyContent:"space-between",py:1,borderBottom:"1px solid #eee",sx:{backgroundColor:x?"#fff8e1":"transparent",borderLeft:x?"3px solid #ffb300":"3px solid transparent",pl:1},children:[e.jsxs(u,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(y,{variant:"body2",fontWeight:"bold",sx:{textTransform:"capitalize"},children:j.replace(/_/g," ")}),x&&e.jsx(qt,{label:"Changed",size:"small",color:"warning",variant:"outlined",sx:{height:20}})]}),e.jsx(y,{variant:"body2",color:"text.secondary",children:String(E)})]},j)})})};return e.jsxs(e.Fragment,{children:[o==="icon"?e.jsx(Je,{title:"View Audit Trail",children:e.jsx(Ge,{onClick:V,size:"small",sx:{color:"#6c5ffc"},children:e.jsx(_o,{size:18})})}):e.jsx(et,{variant:"contained",onClick:V,startIcon:e.jsx(bo,{size:18}),sx:{ml:"1rem",backgroundColor:"#6c5ffc","&:hover":{backgroundColor:"#5b4fde"}},children:"View Audit Trail"}),e.jsxs(Ft,{open:a,onClose:p,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{height:"90vh"}},children:[e.jsx(Lt,{sx:{borderBottom:"1px solid #eee",p:2},children:e.jsxs(u,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(y,{variant:"h6",fontWeight:"bold",children:"Tender Audit Trail"}),e.jsx(Ge,{onClick:p,size:"small",children:e.jsx(Bo,{})})]})}),e.jsx($t,{sx:{p:0,display:"flex",overflow:"hidden"},children:m?e.jsx(u,{flex:1,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(It,{})}):D?e.jsx(u,{flex:1,p:3,children:e.jsx(Mt,{severity:"error",children:D})}):r?h.length===0?e.jsx(u,{flex:1,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(y,{color:"text.secondary",children:"No audit history found for this tender."})}):e.jsxs(e.Fragment,{children:[e.jsxs(u,{sx:{width:"350px",borderRight:"1px solid #eee",overflowY:"auto",p:2},children:[e.jsx(y,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"History"}),h.map(d=>e.jsx(u,{onClick:()=>M(d),sx:{p:1.5,mb:1,borderRadius:2,cursor:"pointer",border:`1px solid ${(b==null?void 0:b.history_id)===d.history_id?"#6c5ffc":"transparent"}`,backgroundColor:(b==null?void 0:b.history_id)===d.history_id?"#f4f2ff":"transparent","&:hover":{backgroundColor:"#f9f8ff"}},children:e.jsxs(u,{display:"flex",alignItems:"center",children:[e.jsx(Je,{title:d.history_type==="+"?"Created":d.history_type==="~"?"Updated":"Deleted",children:e.jsx(u,{mr:1.5,children:ne(d.history_type)})}),e.jsxs(u,{children:[e.jsx(y,{variant:"body2",fontWeight:"bold",children:d.history_user.full_name}),e.jsx(y,{variant:"caption",color:"text.secondary",children:new Date(d.history_date).toLocaleString()})]})]})},d.history_id))]}),e.jsx(u,{sx:{flex:1,p:3,overflowY:"auto"},children:b?e.jsxs(e.Fragment,{children:[e.jsxs(u,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[e.jsxs(u,{children:[e.jsxs(y,{variant:"h5",fontWeight:"bold",children:["Version ",b.history_id]}),e.jsxs(u,{display:"flex",alignItems:"center",color:"text.secondary",mt:1,children:[e.jsx(st,{size:16}),e.jsxs(y,{variant:"body2",ml:1,children:[b.history_user.full_name," (",b.history_user.user_id,")"]}),e.jsx(fo,{size:16,style:{marginLeft:"16px"}}),e.jsx(y,{variant:"body2",ml:1,children:new Date(b.history_date).toLocaleString()})]})]}),e.jsxs(nt,{value:L,onChange:(d,f)=>Y(f),children:[e.jsx(fe,{label:"Changes",value:"changes"}),e.jsx(fe,{label:"Snapshot",value:"snapshots"}),e.jsx(fe,{label:"Compare",value:"compare"})]})]}),L==="changes"?se(b.changes):L==="snapshots"?T():e.jsxs(e.Fragment,{children:[e.jsx(u,{display:"flex",justifyContent:"flex-end",children:e.jsxs(nt,{value:A,onChange:(d,f)=>$(f),size:"small",children:[e.jsx(fe,{label:"Cards",value:"cards"}),e.jsx(fe,{label:"Matrix (Changes)",value:"matrix"}),e.jsx(fe,{label:"Snapshots Table",value:"snapshots"})]})}),A==="cards"?J():A==="matrix"?W():i()]})]}):e.jsx(u,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:e.jsx(y,{color:"text.secondary",children:"Select a version from the history to view details."})})})]}):e.jsx(u,{flex:1,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(y,{color:"text.secondary",children:"Please provide a valid tenderId to view audit history."})})}),e.jsx(Ht,{sx:{borderTop:"1px solid #eee",p:2},children:e.jsx(et,{onClick:p,variant:"outlined",children:"Close"})})]})]})},qo=()=>{const r="tender_allocation",[o,a]=c.useState(""),[C,m]=c.useState(!1),[v,D]=c.useState([]),[k,h]=c.useState(!1),[P,R]=c.useState(null),[z,b]=c.useState(3),[M,L]=c.useState(1),[Y,A]=c.useState([]),[$,V]=c.useState(!1),[i,W]=c.useState({refNo:"",location:"",releaseDate:"",tenderValue:"",emdAmount:"",emdValidity:"",emdConditions:"",emdRefundDate:"",emdIsRefunded:"",authority:"",contact:"",personnel:"",startDate:"",endDate:"",description:"",status:""}),J=()=>{W({refNo:"",location:"",releaseDate:"",tenderValue:"",emdAmount:"",emdValidity:"",emdConditions:"",emdRefundDate:"",emdIsRefunded:"",authority:"",contact:"",personnel:"",startDate:"",endDate:"",description:"",status:""}),h(!1),R(null)},p=c.useRef([]),[ne,se]=c.useState({}),T={padding:"10px",border:"1px solid #ddd",whiteSpace:"nowrap",color:"#7267ef"},d={padding:"6px 12px",margin:"0 4px",backgroundColor:"#7267ef",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},f={padding:"10px",border:"1px solid #ddd",verticalAlign:"top",whiteSpace:"nowrap"},_={backgroundColor:"transparent",border:"none",color:"#7267ef",cursor:"pointer",padding:"8px"},j={backgroundColor:"transparent",border:"none",color:"#e74c3c",cursor:"pointer",padding:"8px"},E={display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},x={gridColumn:"1 / span 2"},N=(t,n,g={},q={})=>{const H=new Date().toLocaleString(),F="Admin";let O=[],K="";K="Tender deleted";const le={action:t,tenderId:n,changes:O,actionDescription:K,timestamp:H,userrole:F};A(U=>[le,...U])},I=t=>{const{name:n,value:g}=t.target;W({...i,[n]:g})};c.useEffect(()=>{(async()=>{try{const n=await Ne();D(n)}catch(n){console.error("Error fetching tenders:",n)}})()},[]);const ee=()=>{let t={};return i.refNo||(t.refNo="This field is required."),i.location||(t.location="This field is required."),i.releaseDate||(t.releaseDate="This field is required."),i.tenderValue||(t.tenderValue="This field is required."),(!i.emdAmount||!i.emdValidity||!i.emdConditions)&&(t.emdDetails="This field is required."),i.authority||(t.authority="This field is required."),i.contact||(t.contact="This field is required."),i.personnel||(t.personnel="This field is required."),i.startDate||(t.startDate="This field is required."),i.endDate||(t.endDate="This field is required."),i.description||(t.description="This field is required."),i.status||(t.status="This field is required."),se(t),Object.keys(t).length===0},Z=async()=>{try{if(!ee())return;const t={tender_ref_no:i.refNo,location:i.location,release_date:i.releaseDate,tender_value:parseFloat(i.tenderValue),emd_details:{amount:parseFloat(i.emdAmount),validity:i.emdValidity,conditions:i.emdConditions,refund_date:i.emdRefundDate||null,is_refunded:i.emdIsRefunded===""?null:i.emdIsRefunded==="Yes"},authority:i.authority,contact:i.contact,authorized_personnel:i.personnel,start_date:i.startDate,end_date:i.endDate,tender_description:i.description,status:i.status};if(k){await Nt(P,t);const n=await Ne();D(n),alert("Tender Details Updated Successfully")}else{await Pt(t);const n=await Ne();D(n),alert("Tender Details Saved Successfully")}W({refNo:"",location:"",releaseDate:"",tenderValue:"",emdAmount:"",emdValidity:"",emdConditions:"",emdRefundDate:"",emdIsRefunded:"",authority:"",contact:"",personnel:"",startDate:"",endDate:"",description:"",status:""}),h(!1),R(null),m(!1)}catch(t){console.error("Error saving tender:",t),alert("Failed to save tender. Please try again.")}},Q=t=>{var g,q,H,F,O,K;const n=v.find(le=>le.tender_id===t);n&&(W({refNo:n.tender_ref_no||"",location:n.location||"",releaseDate:n.release_date||"",tenderValue:n.tender_value||"",emdAmount:((g=n.emd_details)==null?void 0:g.amount)||"",emdValidity:((q=n.emd_details)==null?void 0:q.validity)||"",emdConditions:((H=n.emd_details)==null?void 0:H.conditions)||"",emdRefundDate:((F=n.emd_details)==null?void 0:F.refund_date)||"",emdIsRefunded:((O=n.emd_details)==null?void 0:O.is_refunded)===!0?"Yes":((K=n.emd_details)==null?void 0:K.is_refunded)===!1?"No":"",authority:n.authority||"",contact:n.contact||"",personnel:n.authorized_personnel||"",startDate:n.start_date||"",endDate:n.end_date||"",description:n.tender_description||"",status:n.status||""}),h(!0),R(n.tender_id),m(!0))},te=async t=>{if(window.confirm("Are you sure you want to delete this tender?"))try{await At(t);const n=v.find(g=>g.tender_id===t);D(v.filter(g=>g.tender_id!==t)),N("Deleted",t,n,{}),alert("Tender deleted successfully.")}catch(n){console.error("Error deleting tender:",n),alert("Failed to delete tender. Please try again.")}},Ie=()=>{const t=new Bt;t.setFontSize(14),t.text("Tender Report",14,15);let n=30;oe.forEach((g,q)=>{var F,O,K;t.setFontSize(11),t.setFont("helvetica","bold"),t.text(`Tender #${q+1}`,14,n),n+=7,t.setFont("helvetica","normal"),[["Tender ID",g.tender_id],["Ref No",g.tender_ref_no],["Location",g.location],["Release Date",g.release_date],["Value",g.tender_value],["EMD Amount",(F=g.emd_details)==null?void 0:F.amount],["EMD Validity",(O=g.emd_details)==null?void 0:O.validity],["EMD Conditions",(K=g.emd_details)==null?void 0:K.conditions],["Authority",g.authority],["Contact",g.contact],["Authorized Personnel",g.authorized_personnel],["Start Date",g.start_date],["End Date",g.end_date],["Description",g.tender_description],["Status",g.status]].forEach(([le,U])=>{t.setFontSize(9),t.setFont("helvetica","bold"),t.text(`${le}:`,20,n),t.setFont("helvetica","normal"),t.text(String(U||""),70,n),n+=6}),n+=4,n>270&&(t.addPage(),n=30)}),t.save("tender-report.pdf")},ge=v.filter(t=>{var g,q,H,F,O;return[t.tender_id,t.tender_ref_no,t.location,t.release_date,t.tender_value,(g=t.emd_details)==null?void 0:g.amount,(q=t.emd_details)==null?void 0:q.validity,(H=t.emd_details)==null?void 0:H.conditions,(F=t.emd_details)==null?void 0:F.refund_date,typeof((O=t.emd_details)==null?void 0:O.is_refunded)=="boolean"?t.emd_details.is_refunded?"Yes":"No":"",t.authority,t.contact,t.authorized_personnel,t.start_date,t.end_date,t.tender_description,t.status].some(K=>K==null?void 0:K.toString().toLowerCase().includes(o.toLowerCase()))}),ae=Math.ceil(ge.length/z),je=(M-1)*z,oe=ge.slice(je,je+z),ve=()=>{V(!$)};return e.jsxs("div",{style:{padding:"2rem",minHeight:"100vh"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem"},children:e.jsx(Ze,{slug:r,action:"can_create",children:e.jsx("button",{onClick:()=>{J(),m(!0)},style:{backgroundColor:"#7267ef",color:"#fff",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",cursor:"pointer"},children:"Add Tender Details"})})}),C&&e.jsx("div",{style:{position:"fixed",top:0,left:0,zIndex:2e3,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"flex-start",paddingTop:"1rem",overflowY:"auto"},children:e.jsxs("div",{style:{backgroundColor:"#fff",padding:"1.5rem",width:"95%",maxWidth:$?"none":"800px",maxHeight:$?"95vh":"90vh",height:$?"95vh":"auto",overflowY:"auto",border:"3px solid #E6E6FA",position:"relative",borderRadius:"8px"},children:[e.jsxs("div",{style:{position:"absolute",top:"1rem",right:"1rem",display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:ve,style:{background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center"},"aria-label":$?"Minimize Modal":"Maximize Modal",children:$?e.jsx(Vt,{size:20}):e.jsx(Wt,{size:20})}),e.jsx("button",{onClick:()=>{m(!1),V(!1)},style:{background:"transparent",border:"none",fontSize:"1.25rem",fontWeight:"bold",cursor:"pointer"},"aria-label":"Close Modal",children:"×"})]}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1.5rem"},children:k?"Edit Tender":"Add Tender"}),e.jsxs("div",{style:E,children:[e.jsxs("div",{children:[e.jsxs("label",{children:["Tender Ref. No. ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{ref:t=>p.current[0]=t,onKeyDown:t=>{var n;return t.key==="Enter"&&((n=p.current[1])==null?void 0:n.focus())},name:"refNo",value:i.refNo,onChange:I,className:"input"})]}),e.jsxs("div",{children:[e.jsxs("label",{children:["Location ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{ref:t=>p.current[1]=t,onKeyDown:t=>{var n;return t.key==="Enter"&&((n=p.current[2])==null?void 0:n.focus())},name:"location",value:i.location,onChange:I,className:"input"})]}),e.jsxs("div",{children:[e.jsxs("label",{children:["Release Date ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{type:"date",ref:t=>p.current[2]=t,onKeyDown:t=>{var n;return t.key==="Enter"&&((n=p.current[3])==null?void 0:n.focus())},name:"releaseDate",value:i.releaseDate,onChange:I,className:"input"})]}),e.jsxs("div",{children:[e.jsxs("label",{children:["Tender Value ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{type:"number",ref:t=>p.current[3]=t,onKeyDown:t=>{var n;return t.key==="Enter"&&((n=p.current[4])==null?void 0:n.focus())},name:"tenderValue",value:i.tenderValue,onChange:I,className:"input"})]}),e.jsx("div",{style:x,children:e.jsx("h3",{style:{margin:"1rem 0 0.5rem 0",color:"#7267ef"},children:"EMD / Bank Guarantee Details"})}),e.jsxs("div",{children:[e.jsxs("label",{children:["Amount ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{ref:t=>p.current[4]=t,onKeyDown:t=>{var n;return t.key==="Enter"&&((n=p.current[5])==null?void 0:n.focus())},type:"number",name:"emdAmount",value:i.emdAmount,onChange:I,className:"input"})]}),e.jsxs("div",{children:[e.jsxs("label",{children:["Validity Period ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{ref:t=>p.current[5]=t,onKeyDown:t=>{var n;return t.key==="Enter"&&((n=p.current[6])==null?void 0:n.focus())},type:"date",name:"emdValidity",value:i.emdValidity,onChange:I,className:"input"})]}),e.jsxs("div",{style:x,children:[e.jsxs("label",{children:["Conditions ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("textarea",{ref:t=>p.current[6]=t,onKeyDown:t=>{var n;return t.key==="Enter"&&((n=p.current[7])==null?void 0:n.focus())},name:"emdConditions",value:i.emdConditions,onChange:I,className:"input",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{children:"EMD Refund Date"}),e.jsx("input",{type:"date",ref:t=>p.current[7]=t,onKeyDown:t=>{var n;return t.key==="Enter"&&((n=p.current[8])==null?void 0:n.focus())},name:"emdRefundDate",value:i.emdRefundDate,onChange:I,className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"EMD Is Refunded"}),e.jsxs("select",{ref:t=>p.current[8]=t,onKeyDown:t=>{var n;return t.key==="Enter"&&((n=p.current[9])==null?void 0:n.focus())},name:"emdIsRefunded",value:i.emdIsRefunded,onChange:I,className:"input",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"No",children:"No"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{children:["Authority ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{ref:t=>p.current[9]=t,onKeyDown:t=>{var n;return t.key==="Enter"&&((n=p.current[10])==null?void 0:n.focus())},name:"authority",value:i.authority,onChange:I,className:"input"})]}),e.jsxs("div",{children:[e.jsxs("label",{children:["Contact ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{ref:t=>p.current[10]=t,onKeyDown:t=>{var n;return t.key==="Enter"&&((n=p.current[11])==null?void 0:n.focus())},name:"contact",value:i.contact,onChange:I,className:"input"})]}),e.jsxs("div",{children:[e.jsxs("label",{children:["Authorized Personnel ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{ref:t=>p.current[11]=t,onKeyDown:t=>{var n;return t.key==="Enter"&&((n=p.current[12])==null?void 0:n.focus())},name:"personnel",value:i.personnel,onChange:I,className:"input"})]}),e.jsxs("div",{children:[e.jsxs("label",{children:["Start Date ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{ref:t=>p.current[12]=t,onKeyDown:t=>{var n;return t.key==="Enter"&&((n=p.current[13])==null?void 0:n.focus())},type:"date",name:"startDate",value:i.startDate,onChange:I,className:"input"})]}),e.jsxs("div",{children:[e.jsxs("label",{children:["End Date ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{ref:t=>p.current[13]=t,onKeyDown:t=>{var n;return t.key==="Enter"&&((n=p.current[14])==null?void 0:n.focus())},type:"date",name:"endDate",value:i.endDate,onChange:I,className:"input"})]}),e.jsxs("div",{style:x,children:[e.jsxs("label",{children:["Tender Description ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("textarea",{ref:t=>p.current[14]=t,onKeyDown:t=>{var n;return t.key==="Enter"&&((n=p.current[15])==null?void 0:n.focus())},name:"description",value:i.description,onChange:I,className:"input",rows:4})]}),e.jsxs("div",{children:[e.jsxs("label",{children:["Status ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{ref:t=>p.current[15]=t,name:"status",value:i.status,onChange:I,className:"input",children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"Open",children:"Open"}),e.jsx("option",{value:"Under Review",children:"Under Review"}),e.jsx("option",{value:"Closed",children:"Closed"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx(Qe,{slug:r,action:k?"can_update":"can_create",children:e.jsx("button",{onClick:Z,style:{backgroundColor:"#7267ef",color:"#fff",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",fontWeight:"500"},children:k?"Update":"Save"})}),e.jsx("button",{onClick:()=>{m(!1),V(!1)},style:{padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"1px solid #ccc",backgroundColor:"#f8f9fa",cursor:"pointer",fontWeight:"500"},children:"Cancel"})]})]})}),e.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:"0.5rem",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",padding:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{style:{marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#7267ef",margin:"0"},children:"TENDER REPORT"}),e.jsxs("button",{onClick:Ie,style:{backgroundColor:"#dc3545",color:"#fff",padding:"0.75rem 1.25rem",borderRadius:"0.5rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center"},children:[e.jsx(yo,{size:20,style:{marginRight:"0.5rem"}}),"Download as PDF"]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{fontWeight:"500"},children:"Rows per page: "}),e.jsxs("select",{onChange:t=>b(Number(t.target.value)),value:z,style:{padding:"0.5rem",fontSize:"1rem",borderRadius:"0.375rem",border:"1px solid #ccc",outline:"none",backgroundColor:"#fff"},children:[e.jsx("option",{value:3,children:"3"}),e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:15,children:"15"})]})]}),e.jsxs("div",{style:{overflowX:"auto"},children:[e.jsx("input",{type:"text",placeholder:"Search Vendors",value:o,onChange:t=>a(t.target.value),className:"input",style:{marginBottom:"1rem",width:"100%",maxWidth:"300px"}}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"1200px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f8f9fa"},children:[e.jsx("th",{style:T,children:"Tender ID"}),e.jsx("th",{style:T,children:"Ref No"}),e.jsx("th",{style:T,children:"Location"}),e.jsx("th",{style:T,children:"Release Date"}),e.jsx("th",{style:T,children:"Value"}),e.jsx("th",{style:T,children:"EMD Amount"}),e.jsx("th",{style:T,children:"EMD Validity"}),e.jsx("th",{style:T,children:"EMD Conditions"}),e.jsx("th",{style:T,children:"EMD Refund Date"}),e.jsx("th",{style:T,children:"Is Refunded"}),e.jsx("th",{style:T,children:"Authority"}),e.jsx("th",{style:T,children:"Contact"}),e.jsx("th",{style:T,children:"Authorized Personnel"}),e.jsx("th",{style:T,children:"Start Date"}),e.jsx("th",{style:T,children:"End Date"}),e.jsx("th",{style:T,children:"Description"}),e.jsx("th",{style:T,children:"Status"}),e.jsx("th",{style:T,children:"Actions"})]})}),e.jsx("tbody",{children:oe.map(t=>{var n,g,q,H,F;return e.jsxs("tr",{children:[e.jsx("td",{style:f,children:t.tender_id}),e.jsx("td",{style:f,children:t.tender_ref_no}),e.jsx("td",{style:f,children:t.location}),e.jsx("td",{style:f,children:be(t.release_date)}),e.jsx("td",{style:f,children:t.tender_value}),e.jsx("td",{style:f,children:(n=t.emd_details)==null?void 0:n.amount}),e.jsx("td",{style:f,children:be((g=t.emd_details)==null?void 0:g.validity)}),e.jsx("td",{style:f,children:(q=t.emd_details)==null?void 0:q.conditions}),e.jsx("td",{style:f,children:be((H=t.emd_details)==null?void 0:H.refund_date)}),e.jsx("td",{style:f,children:typeof((F=t.emd_details)==null?void 0:F.is_refunded)=="boolean"?t.emd_details.is_refunded?"Yes":"No":""}),e.jsx("td",{style:f,children:t.authority}),e.jsx("td",{style:f,children:t.contact}),e.jsx("td",{style:f,children:t.authorized_personnel}),e.jsx("td",{style:f,children:be(t.start_date)}),e.jsx("td",{style:f,children:be(t.end_date)}),e.jsx("td",{style:f,children:t.tender_description}),e.jsx("td",{style:f,children:t.status}),e.jsxs("td",{style:f,children:[e.jsx(Qe,{slug:r,action:"can_update",children:e.jsx("button",{onClick:()=>Q(t.tender_id),style:_,title:"Edit Tender",children:e.jsx(Do,{size:18,color:"#7267ef"})})}),e.jsx(Ze,{slug:r,action:"can_delete",children:e.jsx("button",{onClick:()=>te(t.tender_id),style:j,title:"Delete Tender",children:e.jsx(Eo,{size:18,color:"#800000"})})}),e.jsx("div",{style:{display:"inline-block",marginLeft:"4px"},children:e.jsx(Ro,{tenderId:t.tender_id,triggerVariant:"icon"})})]})]},t.tender_id)})})]})]}),e.jsxs("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("button",{onClick:()=>L(M>1?M-1:1),style:d,disabled:M===1,children:"Previous"}),e.jsxs("span",{style:{fontSize:"1rem"},children:["Page ",M," of ",ae]}),e.jsx("button",{onClick:()=>L(M<ae?M+1:ae),style:d,disabled:M===ae,children:"Next"})]})]})]})};export{qo as default};
